<div class="ep-tree-view">
  <div *ngFor="let node of nodes" class="ep-tree-view__node">
    <div
      class="ep-tree-view__item"
      [class.ep-tree-view__item--selected]="node.selected"
      (click)="onNodeClick(node, $event)"
    >
      <button
        *ngIf="hasChildren(node)"
        mat-icon-button
        class="ep-tree-view__toggle"
        (click)="onToggle(node, $event)"
        [attr.aria-expanded]="node.expanded"
      >
        <mat-icon>{{ node.expanded ? 'expand_more' : 'chevron_right' }}</mat-icon>
      </button>
      <span *ngIf="!hasChildren(node)" class="ep-tree-view__spacer"></span>
      <mat-icon *ngIf="node.icon" class="ep-tree-view__icon">{{ node.icon }}</mat-icon>
      <span class="ep-tree-view__label">{{ node.label }}</span>
    </div>
    <div *ngIf="node.expanded && hasChildren(node)" class="ep-tree-view__children">
      <ep-tree-view
        [nodes]="node.children!"
        [selectable]="selectable"
        [expandable]="expandable"
        (nodeClick)="nodeClick.emit($event)"
        (nodeToggle)="nodeToggle.emit($event)"
      ></ep-tree-view>
    </div>
  </div>
</div>
