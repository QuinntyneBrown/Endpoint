<main class="composition-wizard">
  <ep-wizard-steps
    [steps]="wizardSteps"
    [currentStep]="currentStep"
  />

  @if (currentStep === 0) {
    <ep-card class="composition-wizard__section">
      <h2 class="composition-wizard__title">Project Information</h2>
      
      <div class="composition-wizard__field">
        <ep-form-input
          label="Solution Name"
          placeholder="Enter solution name"
          [(ngModel)]="composition.solutionName"
          [required]="true"
          helpText="This will be the name of your generated solution"
        />
      </div>

      <div class="composition-wizard__field">
        <ep-form-input
          label="Output Directory"
          placeholder="Select output directory"
          [(ngModel)]="composition.outputDirectory"
          [required]="true"
          helpText="Where the generated files will be saved"
        />
      </div>

      <div class="composition-wizard__field">
        <label class="composition-wizard__label">Description</label>
        <textarea
          class="composition-wizard__textarea"
          placeholder="Describe your solution (optional)"
          [(ngModel)]="composition.description"
          rows="4"
        ></textarea>
      </div>
    </ep-card>

    <ep-card class="composition-wizard__section">
      <h2 class="composition-wizard__title">Target Framework</h2>
      
      <div class="composition-wizard__radio-group">
        @for (framework of frameworks; track framework) {
          <label class="composition-wizard__radio-item" [class.composition-wizard__radio-item--selected]="composition.targetFramework === framework">
            <input
              type="radio"
              name="framework"
              [value]="framework"
              [(ngModel)]="composition.targetFramework"
              class="composition-wizard__radio-input"
            />
            <div class="composition-wizard__radio-indicator">
              <div class="composition-wizard__radio-dot"></div>
            </div>
            <span>{{ framework }}</span>
          </label>
        }
      </div>
    </ep-card>

    <ep-card class="composition-wizard__section">
      <h2 class="composition-wizard__title">Generation Options</h2>
      
      <div class="composition-wizard__checkbox-group">
        <label class="composition-wizard__checkbox-item" [class.composition-wizard__checkbox-item--checked]="composition.includeTests">
          <input
            type="checkbox"
            [(ngModel)]="composition.includeTests"
            class="composition-wizard__checkbox-input"
          />
          <div class="composition-wizard__checkbox-indicator">
            <span class="material-icons">check</span>
          </div>
          <div class="composition-wizard__checkbox-content">
            <div class="composition-wizard__checkbox-title">Include Unit Tests</div>
            <div class="composition-wizard__checkbox-description">Generate xUnit test projects for your solution</div>
          </div>
        </label>

        <label class="composition-wizard__checkbox-item" [class.composition-wizard__checkbox-item--checked]="composition.generateDocs">
          <input
            type="checkbox"
            [(ngModel)]="composition.generateDocs"
            class="composition-wizard__checkbox-input"
          />
          <div class="composition-wizard__checkbox-indicator">
            <span class="material-icons">check</span>
          </div>
          <div class="composition-wizard__checkbox-content">
            <div class="composition-wizard__checkbox-title">Generate Documentation</div>
            <div class="composition-wizard__checkbox-description">Create README and XML documentation comments</div>
          </div>
        </label>

        <label class="composition-wizard__checkbox-item" [class.composition-wizard__checkbox-item--checked]="composition.addDocker">
          <input
            type="checkbox"
            [(ngModel)]="composition.addDocker"
            class="composition-wizard__checkbox-input"
          />
          <div class="composition-wizard__checkbox-indicator">
            <span class="material-icons">check</span>
          </div>
          <div class="composition-wizard__checkbox-content">
            <div class="composition-wizard__checkbox-title">Add Docker Support</div>
            <div class="composition-wizard__checkbox-description">Include Dockerfile and docker-compose configuration</div>
          </div>
        </label>

        <label class="composition-wizard__checkbox-item" [class.composition-wizard__checkbox-item--checked]="composition.addCICD">
          <input
            type="checkbox"
            [(ngModel)]="composition.addCICD"
            class="composition-wizard__checkbox-input"
          />
          <div class="composition-wizard__checkbox-indicator">
            <span class="material-icons">check</span>
          </div>
          <div class="composition-wizard__checkbox-content">
            <div class="composition-wizard__checkbox-title">CI/CD Configuration</div>
            <div class="composition-wizard__checkbox-description">Add GitHub Actions workflow files</div>
          </div>
        </label>
      </div>
    </ep-card>
  }

  @if (currentStep === 1) {
    <ep-card class="composition-wizard__section">
      <h2 class="composition-wizard__title">Select Components</h2>
      <p class="composition-wizard__description">Choose the components and templates to include in your solution</p>
      <div class="composition-wizard__placeholder">
        <span class="material-icons">folder_special</span>
        <p>Component selection will be implemented here</p>
      </div>
    </ep-card>
  }

  @if (currentStep === 2) {
    <ep-card class="composition-wizard__section">
      <h2 class="composition-wizard__title">Configuration</h2>
      <p class="composition-wizard__description">Review and configure your composition settings</p>
      <div class="composition-wizard__placeholder">
        <span class="material-icons">settings</span>
        <p>Configuration options will be implemented here</p>
      </div>
    </ep-card>
  }

  <div class="composition-wizard__actions">
    @if (currentStep > 0) {
      <button mat-stroked-button (click)="onPrevious()">
        <mat-icon>arrow_back</mat-icon>
        Previous
      </button>
    }
    <button mat-stroked-button (click)="onCancel()">
      <mat-icon>close</mat-icon>
      Cancel
    </button>
    <div class="composition-wizard__spacer"></div>
    @if (currentStep < steps.length - 1) {
      <button mat-flat-button color="primary" (click)="onNext()" [disabled]="!canProceed()">
        Next: {{ steps[currentStep + 1].label }}
        <mat-icon>arrow_forward</mat-icon>
      </button>
    } @else {
      <button mat-flat-button color="primary" (click)="onComplete()">
        <mat-icon>check</mat-icon>
        Complete
      </button>
    }
  </div>
</main>
